<!DOCTYPE xms-configuration>
<xms-configuration>

    <!--
        @copyright  Copyright 2012 (c) EMC. (http://www.emc.com)
    -->

    <!--
        For information on the bootstrap configuration and how to customize it, please refer the "Bootstrap File" section under Chapter 2 - "Preparing xMS"
        from the "xMS Deployment Guide".
    -->


    <!-- ******************************************************************************** -->
    <!-- 1. System Accounts -->
    <!--

        This section defines the System Accounts used by xMS.

        <system-account name="name of the system account">
            <system-account-type nameref="type of the system account">
            <credentials username="username" password="password" domain="">
        </system-account name>

        1.1 SITE_VSPHERE: Maps to vSphere credentials

        1.2 SITE_VCLOUD: Maps to vCloud credentials with administrative privileges

        1.3 SITE_HYPERIC_SERVER: Maps to Hyperic server credentials

        1.4 MEDIA_ACCESS: Maps to media location credentials for accessing installers

        1.5 VDC1_ADD_TO_DOMAIN: Maps to a domain user credentials

        1.6 DEFAULT_SERVICE: Maps to a service account used by xMS for installing all the services

        1.7 DEFAULT_SERVICE_ENDPOINT: Maps to default credentials used by xMS for setting up service endpoints

        1.8 WINDOWS_TEMPLATE: Maps to administrative credentials for the OS template

     -->


    <system-account name="SITE_VSPHERE">
        <system-account-type nameref="SITE"/> <!-- Do not change this -->
        <credentials username="username" password="password" domain=""/>
    </system-account>

    <system-account name="SITE_VCLOUD">
        <system-account-type nameref="SITE"/> <!-- Do not change this -->
        <credentials username="username" password="password" domain=""/>
    </system-account>

    <system-account name="SITE_HYPERIC_SERVER">
        <system-account-type nameref="SITE"/> <!-- Do not change this -->
        <credentials username="username" password="password" domain=""/>
    </system-account>

    <system-account name="MEDIA_ACCESS">
        <system-account-type nameref="MEDIA_ACCESS"/> <!-- Do not change this -->
        <credentials username="username" password="password" domain=""/>
    </system-account>

    <system-account name="VDC1_ADD_TO_DOMAIN">
        <system-account-type nameref="ADD_TO_DOMAIN"/> <!-- Do not change this -->
        <credentials username="username" password="password" domain=""/>
    </system-account>

    <system-account name="DEFAULT_SERVICE">
        <system-account-type nameref="SERVICE"/> <!-- Do not change this -->
        <credentials username="username" password="password" domain=""/>
    </system-account>

    <system-account name="DEFAULT_SERVICE_ENDPOINT">
        <system-account-type nameref="SERVICE_ENDPOINT"/> <!-- Do not change this -->
        <credentials username="username" password="password" domain=""/>
    </system-account>

    <system-account name="WINDOWS_TEMPLATE">
        <system-account-type nameref="OS_TEMPLATE"/> <!-- Do not change this -->
        <credentials username="username" password="password" domain=""/>
    </system-account>

    <!--
        This template is used for Dev VM scenario.
        Uncomment if you have created a base OS VM template with SQL server

        <system-account name="WINDOWS_SQL_TEMPLATE">
            <system-account-type nameref="OS_TEMPLATE" />
            <credentials username="username" password="password" domain="" />
        </system-account>
    -->


    <!-- ******************************************************************************** -->
    <!-- 2. vCloud Organization -->
    <!--

        2.1 <organization>
            2.1.1. <name>: Name of the vCloud Organization (for vCenter specify a dummy name).
            2.1.2. <key>: Abbreviation of Organization name used by naming policy

     -->
    <organization name="ORGANIZATION_NAME" key="KEY"/>


    <!-- ******************************************************************************** -->
    <!-- 3. Virtual Site -->
    <!--

        3.1 <virtual-site>
            3.1.1 <name> : Name for the virtual site

        3.2 <vcloud-director-connection>: vCloud server connection information
            3.2.1. <host>: IP address or host name for vCloud server
            3.2.2. <protocol>: "HTTPS" - Do not change this
            3.2.3. <system-account-binding>: SITE_VCLOUD system account defined in Section 1

        3.3 <vcloud-api-version>: "1.0" - Do not change this

        3.4 <vcenter-connection>: vSphere connection information
            3.4.1. <host>: IP address or host name for vSphere
            3.4.2. <protocol>: "HTTPS" - Do not change this
            3.4.3. <system-account-binding>: SITE_VSPHERE system account defined in section 1

        3.5 <vcenter-hyperic-agent> (Optional): Hyperic agent connection information for vCenter
            3.5.1. <host>: vCenter IP address where Hyperic Agent is running
            3.5.2. <port>: Hyperic Agent port (Default is 2144)

     -->

    <virtual-site name="xmsSite">

        <vcloud-director-connection>
            <host>0.0.0.0</host>
            <protocol>https</protocol> <!-- Do not change this -->
            <system-account-binding>
                <system-account nameref="SITE_VCLOUD"/>
            </system-account-binding>
        </vcloud-director-connection>

        <vcloud-api-version>1.0</vcloud-api-version> <!-- Do not change this -->

        <vcenter-connection>
            <host>0.0.0.0</host>
            <protocol>https</protocol> <!-- Do not change this -->
            <system-account-binding>
                <system-account nameref="SITE_VSPHERE"/>
            </system-account-binding>
        </vcenter-connection>

        <vcenter-hyperic-agent>
            <host>0.0.0.0</host>
            <port>2144</port>
        </vcenter-hyperic-agent>

    </virtual-site>


    <!-- ******************************************************************************** -->
    <!-- 4.  Virtual DataCentre -->
    <!--
        4.1. <virtual-data-center> (for vSphere)

            4.1.1. <name>: Name of the vdc
            4.1.2. <virtual-site>
                4.1.2.1 <nameref>: Name of virtual site (Map from Virtual Site section)
            4.1.3. <organization>
                4.1.3.1 <nameref>: Dummy name for vCenter
            4.1.4. <management-type>: Allowed values are VCENTER |VCLOUD
            4.1.5. <vcenter-datacenter>
                4.1.5.1 <path>: Datacenter path in vSphere

            4.1.6. <policies>:

                4.1.6.1. <os-domain-policy>
                    4.1.6.1.1. <domain-name>: Specify the fully qualified domain name here(if required to add VM to domain)
                    4.1.6.1.2. <domain-type>: Allowed Values EXTERNAL|LOCAL.(Use domain-type LOCAL if not adding VM to domain)
                    4.1.6.1.3. <add-to-domain-account>: Name of your add to domain account (Map from System Accounts section)
                    4.1.6.1.4. <domain-service-account>:  Name of your service user account (Map from System Accounts section)

                4.1.6.2. <naming-policy>
                    4.1.6.2.1. <type>: "Default"
                    NOTE: As of now only "Default" naming policy is supported. The pattern used - "{#blueprintKey}{#vm-clusterKey}{#envKey}{#instanceId}-{#orgKey}"

                4.1.6.3. <network-policy>
                    4.1.6.3.1. <network-type>: Allowed values - MANAGED | UNMANAGED
                    4.1.6.3.2. <switch>: vSphere switch name
                    4.1.6.3.3. <address-type>: Allowed values - IP | HOSTNAME | LOCALHOST
                    4.1.6.3.4. <subnet>: Subnet address
                    4.1.6.3.5. <mask>: Mask address
                    4.1.6.3.6. <gateway>: Gateway address
                    4.1.6.3.7. <ip-range>: IP range (You can specify multiple IP ranges)
                    4.1.6.3.8. <dns-primary>: Primary DNS address
                    4.1.6.3.9. <dns-secondary>: Secondary DNS address
                    4.1.6.3.10. <dns-secondary>: Secondary DNS address

            4.1.7. <resource-pool>
                4.1.7.1. <name> (Optional) : vCenter resource pool name.(Get value from vSphere-> Inventory-> Hosts and Clusters)
                4.1.7.2. <default-cluster>: vCenter cluster name (Get value from vSphere-> Inventory-> Hosts and Clusters)
                4.1.7.3. <default-datastore>: vCenter datastore name (Get value from vSphere-> Inventory-> Datastores and Datastore Clusters)

            4.1.8. <system-account-context>: System account bindings for the vDC (SERVICE_ACCOUNT, SERVICE_ENDPOINT_ACCOUNT)

    -->

    <virtual-data-center name="vdc1">
        <virtual-site nameref="xmsSite"/>
        <organization nameref="ORGANIZATION_NAME"/>
        <management-type>VCENTER</management-type>
        <vcenter-datacenter>
            <path>/DatacenterName</path>
        </vcenter-datacenter>
        <policies>
            <!-- domain policy with DOMAIN configuration -->
            <os-domain-policy>
                <domain-name>DOMAIN_NAME</domain-name>
                <domain-type>EXTERNAL</domain-type>
                <add-to-domain-account>
                    <system-account-binding>
                        <system-account nameref="VDC1_ADD_TO_DOMAIN"/>
                    </system-account-binding>
                </add-to-domain-account>
                <domain-service-account>
                    <system-account-binding>
                        <system-account nameref="DEFAULT_SERVICE"/>
                    </system-account-binding>
                </domain-service-account>
            </os-domain-policy>

            <!-- Uncomment this to use domain policy without domain configuration -->
            <!--
               <os-domain-policy>
                   <domain-type>LOCAL</domain-type>
               </os-domain-policy>
            -->

            <naming-policy type="Default"/>

            <network-policy>
                <network-type>MANAGED</network-type>
                <switch>SWITCH</switch>
                <address-type>IP</address-type>
                <subnet>0.0.0.0</subnet>
                <mask>0.0.0.0</mask>
                <gateway>0.0.0.0</gateway>
                <ip-pool>
                    <ip-range>0.0.0.0#10</ip-range>
                </ip-pool>
                <dns-primary>0.0.0.0</dns-primary>
                <dns-secondary>0.0.0.0</dns-secondary>
            </network-policy>

            <!-- Uncomment this to use UNMANAGED network type -->
            <!--
                <network-policy>
                    <network-type>UNMANAGED</network-type>
                    <switch>SWITCH</switch>
                </network-policy>
            -->

        </policies>

        <resource-pool>
            <name>Resource_Pool</name>
            <default-cluster>Default_Cluster</default-cluster>
            <!--default-host>0.0.0.0</default-host-->
            <default-datastore>Default_Datastore</default-datastore>
        </resource-pool>

        <system-account-context>
            <system-account nameref="DEFAULT_SERVICE"/>
            <system-account nameref="DEFAULT_SERVICE_ENDPOINT"/>
        </system-account-context>

    </virtual-data-center>

    <!--
        4.2. <virtual-data-center> (for vCloud)

            4.2.1. <name>: Name of the VDC in vCloud Organization
            4.2.2. <virtual-site>
                4.2.2.1 <nameref>: Name of virtual site (Map from Virtual Site section)
            4.2.3. <organization>
                4.2.3.1 <nameref>: Name of vCloud organization (Map from vCloud Organization section)
            4.2.4. <management-type>: Allowed values are VCENTER |VCLOUD
            4.2.5. <vcenter-datacenter>: Path of Datacenter in vSphere

            4.2.6. <policies>:

                4.2.6.1. <os-domain-policy>
                    4.2.6.1.1. <domain-name>: Specify the fully qualified domain name here(if required to add VM to domain)
                    4.2.6.1.2. <domain-type>: Allowed Values EXTERNAL|LOCAL.(Use domain-type LOCAL if not adding VM to domain)
                    4.2.6.1.3. <add-to-domain-account>: Name of your add to domain account (Map from System Accounts section)
                    4.2.6.1.4. <domain-service-account>:  Name of your service user account (Map from System Accounts section)

                4.2.6.2. <naming-policy>
                    4.2.6.2.1. <type>: "Default"
                    NOTE: As of now only "Default" naming policy is supported. The pattern used - "{#blueprintKey}{#vm-clusterKey}{#envKey}{#instanceId}-{#orgKey}"

                4.2.6.3. <network-policy>
                    4.2.6.3.1. <network-type>: Allowed values - MANAGED | UNMANAGED
                    4.2.6.3.2. <switch>: vSphere switch name
                    4.2.6.3.3. <address-type>: Allowed values - IP | HOSTNAME | LOCALHOST
                    4.2.6.3.4. <subnet>: Subnet address
                    4.2.6.3.5. <mask>: Mask address
                    4.2.6.3.6. <gateway>: Gateway address
                    4.2.6.3.7. <ip-range>: IP range (You can specify multiple IP ranges)
                    4.2.6.3.8. <dns-primary>: Primary DNS address
                    4.2.6.3.9. <dns-secondary>: Secondary DNS address
                    4.2.6.3.10.<dns-secondary>: Secondary DNS address

            4.2.7. <resource-pool>:
                4.2.7.1. <name> (Optional): vCenter resource pool name.(Get value from vSphere-> Inventory-> Hosts and Clusters)
                4.2.7.2. <default-cluster>: vCenter Cluster name (Get value from vSphere-> Inventory-> Hosts and Clusters)
                4.2.7.3. <default-datastore>: vCenter datastore name (Get value from vSphere-> Inventory-> Datastores and Datastore Clusters)

            4.2.8. <system-account-context>: System account bindings for the vDC (SERVICE_ACCOUNT, SERVICE_ENDPOINT_ACCOUNT)

    -->

    <virtual-data-center name="vdc2">
        <virtual-site nameref="xmsSite"/>
        <organization nameref="ORGANIZATION_NAME"/>
        <management-type>VCLOUD</management-type>
        <vcenter-datacenter>
            <path>/DatacenterName</path>
        </vcenter-datacenter>
        <policies>
            <naming-policy type="Default"/>

            <!-- domain policy with DOMAIN configuration -->
            <os-domain-policy>
                <domain-name>DOMAIN_NAME</domain-name>
                <domain-type>EXTERNAL</domain-type>
                <add-to-domain-account>
                    <system-account-binding>
                        <system-account nameref="VDC1_ADD_TO_DOMAIN"/>
                    </system-account-binding>
                </add-to-domain-account>
                <domain-service-account>
                    <system-account-binding>
                        <system-account nameref="DEFAULT_SERVICE"/>
                    </system-account-binding>
                </domain-service-account>
            </os-domain-policy>

            <!-- Uncomment this to use domain policy without domain configuration -->
            <!--
               <os-domain-policy>
                   <domain-type>LOCAL</domain-type>
               </os-domain-policy>
            -->

            <!-- Uncomment this to use MANAGED network type -->
            <!--
                <network-policy>
                    <network-type>MANAGED</network-type>
                    <switch>SWITCH</switch>
                    <address-type>IP</address-type>
                    <subnet>0.0.0.0</subnet>
                    <mask>0.0.0.0</mask>
                    <gateway>0.0.0.0</gateway>
                    <ip-pool>
                        <ip-range>0.0.0.0#10</ip-range>
                    </ip-pool>
                    <dns-primary>0.0.0.0</dns-primary>
                    <dns-secondary>0.0.0.0</dns-secondary>
                </network-policy>
            -->

            <network-policy>
                <network-type>UNMANAGED</network-type>
                <switch>SWITCH</switch>
            </network-policy>

        </policies>

        <resource-pool>
            <name>Resource_Pool</name>
            <default-cluster>Default_Cluster</default-cluster>
            <!--<default-host>0.0.0.0</default-host>-->
            <default-datastore>Default_Datastore</default-datastore>
        </resource-pool>

        <system-account-context>
            <system-account nameref="DEFAULT_SERVICE"/>
            <system-account nameref="DEFAULT_SERVICE_ENDPOINT"/>
        </system-account-context>

    </virtual-data-center>


    <!-- ******************************************************************************** -->
    <!-- 5. VM Templates -->
    <!--
        5.1. <vm-template>
            5.1.1. <name>: Name of the VM Template
            5.1.2. <path>: Absolute path location from datacenter for vSphere and Base OS vApp name for vCloud Director Ex:/DatacenterName/FolderStructure/BaseOSTemplateName

        5.2. <system-account-binding>:
            5.2.1. <system-account>: Name of the windows template account (Map from System Accounts section)

        5.3. <os-type>: Do not change this
            NOTE: Only Windows and 64 bit platform is supported

        5.4. <vm-shared-locations>:
            5.4.1. <location>
                5.4.1.1. <name>: location of the log files

        Location types:

            1. vm-shared-root: A path where the logs should be redirected in the provisioned VM
            2. cs-logs: path for repository service logs
            3. cis-logs: path for Content_Intelligence_Services service logs
            4. cts-logs: path for Content_Transformation_Services service logs
            5. bam-logs: path for Business_Activity_Monitor service logs
            6. xPlore-logs: path for Search service logs

     -->

    <vm-template name="windowsTemplate" install-root="C:">

        <vm>
            <path>/DatacenterName</path>
        </vm>

        <system-account-binding>
            <system-account nameref="WINDOWS_TEMPLATE"/>
        </system-account-binding>

        <os-type family="Windows" architecture="x64"/>
        <!-- Do not change this-->
        <vm-shared-locations>
            <location name="vm-shared-root" path="C:/Logs"/>
            <location name="cs-logs" path="%vm-shared-root%/CS"/>
            <location name="cis-logs" path="%vm-shared-root%/CIS"/>
            <location name="cts-logs" path="%vm-shared-root%/CTS"/>
            <location name="bam-logs" path="%vm-shared-root%/BAM"/>
            <location name="xPlore-logs" path="%vm-shared-root%/xPlore"/>
        </vm-shared-locations>
    </vm-template>

    <!--

        Uncomment this if you have a base OS VM template with SQL Server installed

        <vm-template name="windowsSQLTemplate" install-root="C:">
             <vm>
                 <path>/DatacenterName</path>
             </vm>
             <system-account-binding>
                 <system-account nameref="WINDOWS_SQL_TEMPLATE" />
             </system-account-binding>
             <os-type family="Windows" architecture="x64"/>
            <vm-shared-locations>
                 <location name="vm-shared-root" path="C:/Logs"/>
                 <location name="cs-logs" path="%vm-shared-root%/CS"/>
                 <location name="cis-logs" path="%vm-shared-root%/CIS"/>
                 <location name="cts-logs" path="%vm-shared-root%/CTS"/>
                 <location name="bam-logs" path="%vm-shared-root%/BAM"/>
                 <location name="xPlore-logs" path="%vm-shared-root%/xPlore"/>
             </vm-shared-locations>
         </vm-template>

     -->


    <!-- ******************************************************************************** -->
    <!-- 6. Server Configuration -->
    <!--

        6.1. <server-configuration>
            6.1.1. <name>: Name of the xms server
            6.1.2. <home-site>: Name of virtual site (Map from Virtual Site section)
            6.1.3. <utility-vdc>: Name of virtual data center (Map from Virtual DataCentre section)
            6.1.4. <utility-organization>: Name of vCloud organization (Map from vCloud Organization section)
            6.1.5. <install-storage-connection>
                6.1.5.1. <host>: NAS IP address or host name where installers are copied
                6.1.5.2. <protocol>: "UNC" - Do not change this
                6.1.5.3. <path>: Path where the installers are available
                6.1.5.4. <system-account-binding>:
                    6.1.5.4.1 <system-account>: System account binding for the install storage connection (MEDIA_ACCESS)
            6.1.6. <recipe-storage-connection>:
                6.1.6.1. <protocol>: "URI" - Do not change this
                6.1.6.2. <path>: "${XMS_HOME}/lib/recipes" - Do not change this
                6.1.6.3. <system-account-binding>:
                    6.1.6.3.1 <system-account>: System account binding for the recipe storage connection (MEDIA_ACCESS)
            6.1.7. <vcenter-build-folder>: vCenter location where environment templates should be stored
                6.1.7.1 <path>: Relative path from vCenter datacenter
            6.1.9. <hyperic-server-connection>:
                6.1.9.1. <host>: vCenter IP address where Hyperic Server is running.
                6.1.9.2. <port>: Hyperic server port (Default is 7080)
                6.1.9.3.  <system-account-binding>
                    6.1.9.3.1. <system-account>: System account binding for Hyperic server connection (SITE_HYPERIC_SERVER)
            6.1.10. <xms-action-timeouts>: Set retry count and timeouts for VIX actions performed by xMS
                6.1.10.1. <xms-action-timeout>
                    6.1.10.1.1. <retry-count>: No. of retries performed
                    6.1.10.1.2. <retry-interval>: Interval between each retry
                    6.1.10.1.3. <action-id>: Identifier for the action - Do not change this
     -->

    <server-configuration name="xms"> <!-- Do not change this -->
    	<xms-version><name>1.1.0.0</name></xms-version>
        <home-site nameref="xmsSite"/>
        <utility-vdc nameref="vdc1"/>
        <utility-organization nameref="ORGANIZATION_NAME"/>
        <install-storage-connection>
            <host>0.0.0.0</host>
            <protocol>UNC</protocol>
            <path>\Shared\installs</path>
            <system-account-binding>
                <system-account nameref="MEDIA_ACCESS"/>
            </system-account-binding>
        </install-storage-connection>

        <recipe-storage-connection>
            <protocol>URI</protocol>
            <path>${XMS_HOME}/lib/recipes</path>
            <system-account-binding>
                <system-account nameref="MEDIA_ACCESS"/>
            </system-account-binding>
        </recipe-storage-connection>

        <vcenter-build-folder>
            <path>xms/build</path>
        </vcenter-build-folder>

        <hyperic-server-connection>
            <host>0.0.0.0</host>
            <port>7080</port>
            <system-account-binding>
                <system-account nameref="SITE_HYPERIC_SERVER"/>
            </system-account-binding>
        </hyperic-server-connection>

        <xms-action-timeouts>
            <xms-action-timeout retry-count="50" retry-interval="25" action-id="action.vm.download-file"/>
            <xms-action-timeout retry-count="50" retry-interval="25" action-id="action.vm.upload-file"/>
            <xms-action-timeout retry-count="50" retry-interval="25" action-id="action.vm.create-directory"/>
            <xms-action-timeout retry-count="50" retry-interval="25" action-id="action.vm.directory-exists"/>
            <xms-action-timeout retry-count="50" retry-interval="25" action-id="action.vm.file-exists"/>
            <xms-action-timeout retry-count="50" retry-interval="25" action-id="action.vm.get-env-variables"/>
            <xms-action-timeout retry-count="50" retry-interval="25" action-id="action.vm.get-ip"/>
            <xms-action-timeout retry-count="50" retry-interval="25" action-id="action.vm.login"/>
            <xms-action-timeout retry-count="50" retry-interval="25" action-id="action.vm.logout"/>
            <xms-action-timeout retry-count="50" retry-interval="25" action-id="action.vm.get-vmname"/>
            <xms-action-timeout retry-count="50" retry-interval="25" action-id="action.vm.list-directory"/>
            <xms-action-timeout retry-count="50" retry-interval="25" action-id="action.vm.list-process"/>
            <xms-action-timeout retry-count="50" retry-interval="25" action-id="action.vm.power-on"/>
            <xms-action-timeout retry-count="50" retry-interval="25" action-id="action.vm.run-command"/>
            <xms-action-timeout retry-count="50" retry-interval="25" action-id="action.vm.wait-for-vm-tools"/>
            <xms-action-timeout retry-count="50" retry-interval="25" action-id="action.vm.power-off"/>
        </xms-action-timeouts>
		
    </server-configuration>

</xms-configuration>
